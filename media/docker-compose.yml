services:
  ##
  # Server homepage
  # https://gethomepage.dev/
  ##
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    volumes:
      - homepage_config:/app/config
      - /media/trinity:/trinity:ro
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - 3000:3000
    restart: always

  ##
  # Bittorrent client
  ##
  transmission:
    image: docker.io/linuxserver/transmission:latest
    environment:
      - PUID=169
      - PGID=1001
      - TZ=America/New_York
    volumes:
      - transmission_config:/config
      - /media/trinity/.torrents:/data/.torrents
    ports:
      - 127.0.0.1:9091:9091
      - 51413:51413
      - 51413:51413/udp
    restart: always
    labels:
      - homepage.group=Downloads
      - homepage.name=Transmission
      - homepage.icon=transmission
      - homepage.href=https://mattvperry.com/torrent/web/
      - homepage.widget.type=transmission
      - homepage.widget.url=http://transmission:9091/
      - homepage.widget.rpcUrl=transmission/

  ##
  # Usenet client
  ##
  nzbget:
    image: docker.io/linuxserver/nzbget:latest
    environment:
      - PUID=974
      - PGID=1001
      - TZ=America/New_York
    volumes:
      - nzbget_config:/config
      - /media/trinity/.usenet:/data/.usenet
    ports:
      - 127.0.0.1:6789:6789
    restart: always
    labels:
      - homepage.group=Downloads
      - homepage.name=NZBGet
      - homepage.icon=nzbget
      - homepage.href=https://mattvperry.com/nzb/
      - homepage.widget.type=nzbget
      - homepage.widget.url=http://nzbget:6789

  ##
  # Index organizer
  ##
  prowlarr:
    image: docker.io/linuxserver/prowlarr:latest
    environment:
      - PUID=977
      - PGID=977
      - TZ=America/New_York
    volumes:
      - prowlarr_config:/config
    ports:
      - 127.0.0.1:9696:9696
    restart: always
    labels:
      - homepage.group=Downloads
      - homepage.name=Prowlarr
      - homepage.icon=prowlarr
      - homepage.href=https://mattvperry.com/index/
      - homepage.widget.type=prowlarr
      - homepage.widget.url=http://prowlarr:9696
      - homepage.widget.key=${PROWLARR_API}

  ##
  # Movies
  ##
  radarr:
    image: docker.io/linuxserver/radarr:latest
    environment:
      - PUID=986
      - PGID=1001
      - TZ=America/New_York
    volumes:
      - radarr_config:/config
      - /media/trinity:/data
    ports:
      - 127.0.0.1:7878:7878
    restart: always
    labels:
      - homepage.group=Media
      - homepage.name=Radarr
      - homepage.icon=radarr
      - homepage.href=https://mattvperry.com/movies/
      - homepage.widget.type=radarr
      - homepage.widget.url=http://radarr:7878
      - homepage.widget.key=${RADARR_API}
      - homepage.widget.enableQueue=true

  ##
  # Television
  ##
  sonarr:
    image: docker.io/linuxserver/sonarr:latest
    environment:
      - PUID=991
      - PGID=1001
      - TZ=America/New_York
    volumes:
      - sonarr_config:/config
      - /media/trinity:/data
    ports:
      - 127.0.0.1:8989:8989
    restart: always
    labels:
      - homepage.group=Media
      - homepage.name=Sonarr
      - homepage.icon=sonarr
      - homepage.href=https://mattvperry.com/tv/
      - homepage.widget.type=sonarr
      - homepage.widget.url=http://sonarr:8989
      - homepage.widget.key=${SONARR_API}
      - homepage.widget.enableQueue=true

  ##
  # Library & Streaming
  ##
  plex:
    image: docker.io/linuxserver/plex:latest
    network_mode: host
    environment: 
      - PUID=421
      - PGID=1001
      - TZ=America/New_York
      - VERSION=public
    volumes:
      - plex_config:/config
      - /media/trinity:/data
    devices:
      - /dev/dri:/dev/dri
    restart: always
    labels:
      - homepage.group=Media
      - homepage.name=Plex
      - homepage.icon=plex
      - homepage.href=https://plex.mattvperry.com/
      - homepage.widget.type=plex
      - homepage.widget.url=https://plex.mattvperry.com
      - homepage.widget.key=${PLEX_API}

volumes:
  homepage_config:
  transmission_config:
  nzbget_config:
  prowlarr_config:
  radarr_config:
  sonarr_config:
  plex_config: